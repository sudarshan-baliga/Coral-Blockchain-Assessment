(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,a,t){},250:function(e,a,t){"use strict";t.r(a);var n=t(6),s=t.n(n),r=t(87),o=t.n(r),i=(t(95),t(19)),c=t(20),l=t(22),h=t(21),p=t(23),u=(t(96),t(30)),m=(t(97),t(44)),d=t.n(m),g=t(24),f=t.n(g),k=t(89),w=t.n(k),b=(t(98),function(e){function a(){return Object(i.a)(this,a),Object(l.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("form",{className:"formContainer"},s.a.createElement(f.a,{error:!this.props.userNameValid,label:"User name",type:"text",autoComplete:"current-password",className:"inpField",value:this.props.userName,onChange:this.props.handleInputChange("userName")}),s.a.createElement(f.a,{error:!this.props.passwordValid,label:"Password",type:"password",className:"inpField",value:this.props.password,onChange:this.props.handleInputChange("password")}),s.a.createElement(f.a,{error:!this.props.emailValid,label:"Email id",type:"email",className:"inpField",value:this.props.email,onChange:this.props.handleInputChange("email")}),s.a.createElement(f.a,{error:!this.props.phoneValid,label:"Phone number",type:"tel",className:"inpField",value:this.props.phone,onChange:this.props.handleInputChange("phone")}),s.a.createElement(d.a,{variant:"contained",color:"primary",onClick:this.props.submitForm},"Insert/Update")),s.a.createElement(w.a,{anchorOrigin:{horizontal:"left",vertical:"top"},open:this.props.snackShow,autoHideDuration:1e4,onClose:this.props.hideSnack,message:s.a.createElement("span",{id:"snackMsg"},this.props.snackMessage),className:"snackBar "+this.props.snackClass}))}}]),a}(n.Component)),v="http://localhost:3001/user";t(249);var C=function(e){function a(){return Object(i.a)(this,a),Object(l.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"searchContainer"},s.a.createElement(f.a,{error:!this.props.searchEmailValid,label:"Enter email to be seached",type:"text",autoComplete:"current-password",className:"searchBar",value:this.props.userName,onChange:this.props.handleInputChange("searchEmail")}),s.a.createElement(d.a,{variant:"contained",color:"primary",onClick:this.props.search},"Search"))}}]),a}(n.Component),S=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(l.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(s)))).state={userNameValid:!0,emailValid:!0,searchEmailValid:!0,passwordValid:!0,phoneValid:!0,userName:"",email:"",searchEmail:"",password:"",phone:"",formValid:!1,snackShow:!0,snackMessage:"Search for the email and edit the form or directly insert data into the form",snackClass:"greenBackground"},t.fields=["email","password","phone","userName"],t.errMessages={email:"Email not valid\n",phone:"Phone number not valid (10 digits and no characters)\n",password:"password not valid (Must have 5+ symbols)\n",userName:"user name not valid (Must have 5+ symbols)\n"},t.errMsg="",t.handleInputChange=function(e){return function(a){t.setState(Object(u.a)({},e,a.target.value))}},t.validate=function(){return new Promise(function(e,a){var n={email:/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/,phone:/^[0-9]{10}$/,password:/(.....).*/,userName:/[a-zA-Z0-9]{4,}/};t.errMsg="",t.fields.map(function(e){var a,s=e+"Valid";t.state[e].match(n[e])?t.setState(Object(u.a)({},s,!0)):(t.errMsg+=t.errMessages[e],t.setState((a={},Object(u.a)(a,s,!1),Object(u.a)(a,"formValid",!1),Object(u.a)(a,"snackMessage",[t.errMsg]),a)))}),e("success")})},t.hideSnack=function(e,a){"clickaway"!==a&&t.setState({snackShow:!1})},t.submitForm=function(){t.setState({formValid:!0,snackMessage:"",snackShow:!1}),t.validate().then(function(e){t.state.formValid?function(e){var a=v+"/insertUser",t={userName:e.userName,email:e.email,phone:e.phone,password:e.password};return new Promise(function(e,n){fetch(a,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(a){a.json().then(function(a){e(a)})}).catch(function(e){console.log(e),n("error in comunicating with server")})})}({email:t.state.email,password:t.state.password,userName:t.state.userName,phone:t.state.phone}).then(function(e){t.setState({snackMessage:e.message,snackShow:!0,snackClass:"greenBackground"})}).catch(function(e){console.log(e),t.setState({snackMessage:"could not talk to server",snackShow:!0,snackClass:"redBackground"})}):t.setState({snackShow:!0,snackClass:"redBackground"})}).catch(function(e){console.log(e)})},t.search=function(){t.state.searchEmail.match(/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/)?(t.setState({snackShow:!1,searchEmailValid:!0}),function(e){var a=v+"/searchUser",t={email:e.email};return console.log("body",t),new Promise(function(e,n){fetch(a,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(a){a.json().then(function(a){e(a)})}).catch(function(e){console.log(e),n("error in comunicating with server")})})}({email:t.state.searchEmail}).then(function(e){e.exists?t.setState({snackMessage:e.message,snackShow:!0,snackClass:"greenBackground",email:e.data.emailId,password:e.data.password,userName:e.data.userName,phone:e.data.phoneNo,emailValid:!0,phoneValid:!0,passwordValid:!0,userNameValid:!0}):t.setState({snackMessage:e.message,snackShow:!0,snackClass:"redBackground"})}).catch(function(e){console.log(e),t.setState({snackMessage:"could not talk to server",snackShow:!0,snackClass:"redBackground"})})):t.setState({snackShow:!0,snackClass:"redBackground",snackMessage:"search email not valid",searchEmailValid:!1})},t}return Object(p.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"mainContainer"},s.a.createElement(C,{search:this.search,handleInputChange:this.handleInputChange,searchEmailValid:this.state.searchEmailValid}),s.a.createElement(b,Object.assign({},this.state,{handleInputChange:this.handleInputChange,hideSnack:this.hideSnack,validate:this.validate,submitForm:this.submitForm})))}}]),a}(n.Component),E=function(e){function a(){return Object(i.a)(this,a),Object(l.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(S,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,a,t){e.exports=t(250)},95:function(e,a,t){},96:function(e,a,t){},97:function(e,a,t){},98:function(e,a,t){}},[[90,1,2]]]);
//# sourceMappingURL=main.7abf3195.chunk.js.map